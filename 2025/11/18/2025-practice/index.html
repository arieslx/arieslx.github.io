<!DOCTYPE html>
<html lang=en>
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />
    <meta name="description" content="你在长列表优化中做了哪些具体的事情？核心思路：避免同时渲染大量的DOM节点，因为DOM节点的创建、渲染和内存占用都非常消耗性能。 1. 虚拟滚动 计算可视区域：监听容器的滚动事件，获取 scrollTop 和 scrollTop + clientHeight 计算渲染区间：根据可视区域和每个列表项的高度，计算出需要渲染的起始索引 startIndex 和结束索引 endIndex。通常会上下多渲染">
<meta property="og:type" content="article">
<meta property="og:title" content="2025年｜前端面试练习题">
<meta property="og:url" content="http://yoursite.com/2025/11/18/2025-practice/index.html">
<meta property="og:site_name" content="Arieslx">
<meta property="og:description" content="你在长列表优化中做了哪些具体的事情？核心思路：避免同时渲染大量的DOM节点，因为DOM节点的创建、渲染和内存占用都非常消耗性能。 1. 虚拟滚动 计算可视区域：监听容器的滚动事件，获取 scrollTop 和 scrollTop + clientHeight 计算渲染区间：根据可视区域和每个列表项的高度，计算出需要渲染的起始索引 startIndex 和结束索引 endIndex。通常会上下多渲染">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2025-11-18T07:17:59.000Z">
<meta property="article:modified_time" content="2025-12-01T04:54:28.679Z">
<meta property="article:tag" content="2025">
<meta property="article:tag" content="front-end-interview">
<meta name="twitter:card" content="summary">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>2025年｜前端面试练习题</title>
    <!-- styles -->
    
<link rel="stylesheet" href="/css/style.css">

    <!-- persian styles -->
    
      
<link rel="stylesheet" href="/css/rtl.css">

    
    <!-- rss -->
    
    
<meta name="generator" content="Hexo 6.3.0"></head>

<body class="max-width mx-auto px3 ltr">
    
      <div id="header-post">
  <a id="menu-icon" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#"><i class="fas fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:none;"><i class="fas fa-chevron-up fa-lg"></i></a>
  <span id="menu">
    <span id="nav">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/tags/">tags</a></li>
        
      </ul>
    </span>
    <br/>
    <span id="actions">
      <ul>
        
        <li><a class="icon" href="/2025/11/23/2025-sum-08/"><i class="fas fa-chevron-left" aria-hidden="true" onmouseover="$('#i-prev').toggle();" onmouseout="$('#i-prev').toggle();"></i></a></li>
        
        
        <li><a class="icon" href="/2025/11/14/2025-11-ai/"><i class="fas fa-chevron-right" aria-hidden="true" onmouseover="$('#i-next').toggle();" onmouseout="$('#i-next').toggle();"></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up" aria-hidden="true" onmouseover="$('#i-top').toggle();" onmouseout="$('#i-top').toggle();"></i></a></li>
        <li><a class="icon" href="#"><i class="fas fa-share-alt" aria-hidden="true" onmouseover="$('#i-share').toggle();" onmouseout="$('#i-share').toggle();" onclick="$('#share').toggle();return false;"></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br/>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2025/11/18/2025-practice/"><i class="fab fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://yoursite.com/2025/11/18/2025-practice/&text=2025年｜前端面试练习题"><i class="fab fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2025/11/18/2025-practice/&title=2025年｜前端面试练习题"><i class="fab fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2025/11/18/2025-practice/&is_video=false&description=2025年｜前端面试练习题"><i class="fab fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=2025年｜前端面试练习题&body=Check out this article: http://yoursite.com/2025/11/18/2025-practice/"><i class="fas fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://yoursite.com/2025/11/18/2025-practice/&title=2025年｜前端面试练习题"><i class="fab fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://yoursite.com/2025/11/18/2025-practice/&title=2025年｜前端面试练习题"><i class="fab fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2025/11/18/2025-practice/&title=2025年｜前端面试练习题"><i class="fab fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://yoursite.com/2025/11/18/2025-practice/&title=2025年｜前端面试练习题"><i class="fab fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2025/11/18/2025-practice/&name=2025年｜前端面试练习题&description="><i class="fab fa-tumblr " aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://yoursite.com/2025/11/18/2025-practice/&t=2025年｜前端面试练习题"><i class="fab fa-hacker-news " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%A0%E5%9C%A8%E9%95%BF%E5%88%97%E8%A1%A8%E4%BC%98%E5%8C%96%E4%B8%AD%E5%81%9A%E4%BA%86%E5%93%AA%E4%BA%9B%E5%85%B7%E4%BD%93%E7%9A%84%E4%BA%8B%E6%83%85%EF%BC%9F"><span class="toc-number">1.</span> <span class="toc-text">你在长列表优化中做了哪些具体的事情？</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%99%9A%E6%8B%9F%E6%BB%9A%E5%8A%A8"><span class="toc-number">1.1.</span> <span class="toc-text">1. 虚拟滚动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%88%86%E9%A1%B5%E5%92%8C%E6%97%A0%E9%99%90%E6%BB%9A%E5%8A%A8"><span class="toc-number">1.2.</span> <span class="toc-text">2. 分页和无限滚动</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E9%A1%B5"><span class="toc-number">1.2.1.</span> <span class="toc-text">分页</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%A0%E9%99%90%E6%BB%9A%E5%8A%A8"><span class="toc-number">1.2.2.</span> <span class="toc-text">无限滚动</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%BE%AE%E8%A7%82%E4%BC%98%E5%8C%96%EF%BC%9A%E5%BF%85%E9%A1%BB%E6%B8%B2%E6%9F%93%E9%95%BF%E5%88%97%E8%A1%A8%E6%97%B6"><span class="toc-number">1.3.</span> <span class="toc-text">3. 微观优化：必须渲染长列表时</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%85%B6%E4%BB%96%E8%BE%85%E5%8A%A9%E4%BC%98%E5%8C%96"><span class="toc-number">1.4.</span> <span class="toc-text">4. 其他辅助优化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E6%89%81%E5%B9%B3%E5%8C%96%E3%80%81%E5%8E%BB%E9%87%8D%E3%80%81%E6%8E%92%E5%BA%8F"><span class="toc-number">2.</span> <span class="toc-text">数组扁平化、去重、排序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#LeetCode%EF%BC%9ALRU-%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6"><span class="toc-number">3.</span> <span class="toc-text">LeetCode：LRU 缓存机制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E6%89%81%E5%B9%B3%E5%8C%96%E4%B8%8E%E5%8E%BB%E9%87%8D"><span class="toc-number">4.</span> <span class="toc-text">数组扁平化与去重</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E6%89%81%E5%B9%B3%E5%8C%96%EF%BC%88%E6%95%B0%E7%BB%84%E9%99%8D%E7%BB%B4%EF%BC%89"><span class="toc-number">5.</span> <span class="toc-text">数组扁平化（数组降维）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Array-prototype-flat-%E6%96%B9%E6%B3%95"><span class="toc-number">5.1.</span> <span class="toc-text">Array.prototype.flat() 方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Array-prototype-flat-%E7%89%B9%E6%80%A7%E6%80%BB%E7%BB%93"><span class="toc-number">5.2.</span> <span class="toc-text">Array.prototype.flat() 特性总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%8B%E5%8A%A8%E5%AE%9E%E7%8E%B0%E6%89%81%E5%B9%B3%E5%8C%96%E6%96%B9%E6%B3%95"><span class="toc-number">6.</span> <span class="toc-text">手动实现扁平化方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E4%B8%80%EF%BC%9A%E4%BD%BF%E7%94%A8-reduce-%E6%96%B9%E6%B3%95"><span class="toc-number">6.1.</span> <span class="toc-text">方法一：使用 reduce 方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E6%AC%A1%E6%80%A7%E6%89%81%E5%B9%B3%E5%8C%96%E6%89%80%E6%9C%89"><span class="toc-number">6.1.1.</span> <span class="toc-text">一次性扁平化所有</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0-flat-%E5%87%BD%E6%95%B0"><span class="toc-number">6.1.2.</span> <span class="toc-text">实现 flat 函数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E4%BA%8C%EF%BC%9A%E4%BD%BF%E7%94%A8%E6%A0%88"><span class="toc-number">6.2.</span> <span class="toc-text">方法二：使用栈</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E6%AC%A1%E6%80%A7%E9%99%8D%E7%BB%B4%E6%89%80%E6%9C%89"><span class="toc-number">6.2.1.</span> <span class="toc-text">一次性降维所有</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E5%8E%BB%E9%87%8D"><span class="toc-number">7.</span> <span class="toc-text">数组去重</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F%E4%B8%80%EF%BC%9ASet%EF%BC%88ES6%EF%BC%89"><span class="toc-number">7.1.</span> <span class="toc-text">方式一：Set（ES6）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F%E4%BA%8C%EF%BC%9Areduce"><span class="toc-number">7.2.</span> <span class="toc-text">方式二：reduce</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E4%B8%89%EF%BC%9Afilter"><span class="toc-number">7.3.</span> <span class="toc-text">方法三：filter</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E5%8E%9F%E5%9C%B0%E5%8E%BB%E9%87%8D%E6%96%B9%E6%B3%95"><span class="toc-number">8.</span> <span class="toc-text">数组原地去重方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E4%B8%80%EF%BC%9A%E6%8E%92%E5%BA%8F%E5%8E%BB%E9%87%8D"><span class="toc-number">9.</span> <span class="toc-text">方法一：排序去重</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E4%BA%8C%EF%BC%9A%E4%BC%98%E5%8C%96%E7%89%88%E6%9C%AC"><span class="toc-number">10.</span> <span class="toc-text">方法二：优化版本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%A4%E7%A7%8D%E6%96%B9%E6%B3%95%E7%9A%84%E6%AF%94%E8%BE%83"><span class="toc-number">11.</span> <span class="toc-text">两种方法的比较</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E5%8E%BB%E9%87%8D%E5%87%BD%E6%95%B0%EF%BC%88%E6%94%AF%E6%8C%81%E5%AF%B9%E8%B1%A1%E5%92%8C%E6%95%B0%E7%BB%84%E5%85%83%E7%B4%A0%EF%BC%89"><span class="toc-number">12.</span> <span class="toc-text">数组去重函数（支持对象和数组元素）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9C%80%E6%B1%82%E8%AF%B4%E6%98%8E"><span class="toc-number">12.1.</span> <span class="toc-text">需求说明</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E8%A7%A3%E6%B3%95%EF%BC%9A%E4%BD%BF%E7%94%A8-JSON-stringify"><span class="toc-number">13.</span> <span class="toc-text">基础解法：使用 JSON.stringify</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90"><span class="toc-number">14.</span> <span class="toc-text">问题分析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">15.</span> <span class="toc-text">解决方案</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E6%80%9D%E8%B7%AF"><span class="toc-number">15.1.</span> <span class="toc-text">解决思路</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-number">15.2.</span> <span class="toc-text">代码实现</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">16.</span> <span class="toc-text">总结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">16.1.</span> <span class="toc-text"></span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%8B%E5%86%99aysnc%E5%92%8Cawait"><span class="toc-number">16.2.</span> <span class="toc-text">手写aysnc和await</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%88%E5%B9%B6%E4%B8%A4%E4%B8%AA%E6%9C%89%E5%BA%8F%E6%95%B0%E7%BB%84"><span class="toc-number">16.3.</span> <span class="toc-text">合并两个有序数组</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#js%E5%88%A4%E6%96%AD%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">17.</span> <span class="toc-text">js判断数据类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#map%E5%AE%9E%E7%8E%B0reduce"><span class="toc-number">18.</span> <span class="toc-text">map实现reduce</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Jsx%E5%92%8CReact-createElement"><span class="toc-number">19.</span> <span class="toc-text">Jsx和React.createElement()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AST%E8%BD%AC%E6%8D%A2"><span class="toc-number">20.</span> <span class="toc-text">AST转换</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A2%84%E5%8A%A0%E8%BD%BD"><span class="toc-number">21.</span> <span class="toc-text">预加载</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%85%E6%8B%B7%E8%B4%9D%E5%92%8C%E6%B7%B1%E6%8B%B7%E8%B4%9D"><span class="toc-number">21.1.</span> <span class="toc-text">浅拷贝和深拷贝</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSON%E6%96%B9%E6%B3%95%E6%B7%B1%E6%8B%B7%E8%B4%9D%E7%9A%84%E5%B1%80%E9%99%90%E6%80%A7"><span class="toc-number">21.2.</span> <span class="toc-text">JSON方法深拷贝的局限性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DFS%EF%BC%8C%E4%BA%8C%E5%8F%89%E6%A0%91%EF%BC%8C%E5%89%8D%E4%B8%AD%E5%90%8E%E5%BA%8F%EF%BC%8C%E4%BB%A5%E5%8F%8A%E6%8F%92%E5%85%A5%E9%83%A8%E5%88%86BFS%E7%9A%84%E7%90%86%E8%AE%BA%E7%9F%A5%E8%AF%86"><span class="toc-number">22.</span> <span class="toc-text">DFS，二叉树，前中后序，以及插入部分BFS的理论知识</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%91%89-DFS-%E5%85%88%E5%BA%8F-%E5%90%8E%E5%BA%8F"><span class="toc-number">22.1.</span> <span class="toc-text">👉 DFS 先序 &#x2F; 后序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%91%89-%E4%BA%8C%E5%8F%89%E6%A0%91%E5%89%8D%E4%B8%AD%E5%90%8E%E5%BA%8F"><span class="toc-number">22.2.</span> <span class="toc-text">👉 二叉树前中后序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#BFS%E5%BA%94%E7%94%A8"><span class="toc-number">22.3.</span> <span class="toc-text">BFS应用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%A2%E8%AF%95%E5%AE%98%EF%BC%9ADFS%E5%92%8CBFS%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9F%E5%9C%A8%E5%89%8D%E7%AB%AF%E6%9C%89%E5%93%AA%E4%BA%9B%E5%9C%BA%E6%99%AF%E5%BA%94%E7%94%A8%EF%BC%9F"><span class="toc-number">22.4.</span> <span class="toc-text">面试官：DFS和BFS的区别？在前端有哪些场景应用？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E5%A4%A7%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95"><span class="toc-number">23.</span> <span class="toc-text">十大排序算法</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index py4">
        
        <article class="post" itemscope itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        2025年｜前端面试练习题
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope itemtype="http://schema.org/Person">
        <span itemprop="name">Arieslx</span>
      </span>
      
    <div class="postdate">
      
        <time datetime="2025-11-18T07:17:59.000Z" itemprop="datePublished">2025-11-18</time>
        
      
    </div>


      

      
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link-link" href="/tags/2025/" rel="tag">2025</a>, <a class="tag-link-link" href="/tags/front-end-interview/" rel="tag">front-end-interview</a>
    </div>


    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <h2 id="你在长列表优化中做了哪些具体的事情？"><a href="#你在长列表优化中做了哪些具体的事情？" class="headerlink" title="你在长列表优化中做了哪些具体的事情？"></a>你在长列表优化中做了哪些具体的事情？</h2><p><strong>核心思路</strong>：避免同时渲染大量的<code>DOM</code>节点，因为<code>DOM</code>节点的创建、渲染和内存占用都非常消耗性能。</p>
<h3 id="1-虚拟滚动"><a href="#1-虚拟滚动" class="headerlink" title="1. 虚拟滚动"></a>1. 虚拟滚动</h3><ul>
<li><strong>计算可视区域</strong>：监听容器的滚动事件，获取 <code>scrollTop</code> 和 <code>scrollTop + clientHeight</code></li>
<li><strong>计算渲染区间</strong>：根据可视区域和每个列表项的高度，计算出需要渲染的起始索引 <code>startIndex</code> 和结束索引 <code>endIndex</code>。通常会上下多渲染 5-10 个项，防止滚动时出现白屏</li>
<li><strong>动态渲染和定位</strong>：<ul>
<li>只渲染 <code>[startIndex, endIndex]</code> 区间的列表项</li>
<li>容器高度设置为所有列表项的总高度，通过”撑开容器”实现</li>
<li>对渲染的列表项使用 <code>position: absolute</code> 或 <code>transform: translateY(...)</code>，设置 <code>top</code> 属性为 <code>索引 × 列表项高度</code></li>
</ul>
</li>
<li><strong>性能优化</strong>：<ul>
<li>使用 <code>requestAnimationFrame</code> 优化动画或 <code>Intersection Observer</code> 优化滚动监听</li>
<li>缓存已计算的位置，对于动态高度的列表需要在渲染后测量并缓存高度</li>
</ul>
</li>
<li><strong>使用的库/技术</strong>：<ul>
<li>React: <code>react-window</code>, <code>react-virtualized</code></li>
<li>Vue: <code>vue-virtual-scroller</code></li>
<li>也可根据业务需求使用 <code>Intersection Observer API</code> 自己实现简化版</li>
</ul>
</li>
</ul>
<h3 id="2-分页和无限滚动"><a href="#2-分页和无限滚动" class="headerlink" title="2. 分页和无限滚动"></a>2. 分页和无限滚动</h3><h4 id="分页"><a href="#分页" class="headerlink" title="分页"></a>分页</h4><ul>
<li><strong>实现方式</strong>：明确将数据分成多页，用户通过点击页码或”加载更多”按钮请求新数据</li>
<li><strong>优点</strong>：实现简单，<code>SEO</code>友好，内存压力小</li>
<li><strong>缺点</strong>：交互不连贯，需要用户主动操作</li>
</ul>
<h4 id="无限滚动"><a href="#无限滚动" class="headerlink" title="无限滚动"></a>无限滚动</h4><ul>
<li><strong>实现方式</strong>：当用户滚动到底部附近时，自动加载下一页数据并追加到当前列表</li>
<li><strong>优点</strong>：用户体验流畅，适合内容流（社交媒体、商品列表）</li>
<li><strong>缺点</strong>：实现复杂，需要管理滚动位置和加载状态；性能随滚动逐渐下降；页脚可能无法到达</li>
<li><strong>优化点</strong>：可与虚拟滚动结合，即使加载很多数据，<code>DOM</code>节点数也保持恒定</li>
</ul>
<h3 id="3-微观优化：必须渲染长列表时"><a href="#3-微观优化：必须渲染长列表时" class="headerlink" title="3. 微观优化：必须渲染长列表时"></a>3. 微观优化：必须渲染长列表时</h3><ul>
<li><p><strong>优化<code>key</code>属性</strong>：</p>
<ul>
<li>使用唯一且稳定的<code>key</code>（如数据中的 id），而不是数组的index</li>
<li>帮助框架准确识别哪些节点可被复用、移动或销毁</li>
</ul>
</li>
<li><p><strong>避免内联对象和函数</strong>：</p>
<ul>
<li>将内联样式对象和函数提取到组件外部，或使用 <code>useCallback</code>/<code>useMemo</code> 进行记忆化</li>
<li>避免因引用不同导致的不必要重渲染</li>
</ul>
</li>
<li><p><strong>简化子组件</strong>：</p>
<ul>
<li>将列表项拆分成独立的轻量子组件</li>
<li>使用 <code>React.memo</code>（函数组件）或 <code>PureComponent</code>（类组件）进行包裹</li>
</ul>
</li>
<li><p><strong>不可变数据与结构共享</strong>：</p>
<ul>
<li>使用不可变数据的方式更新列表数据（ES6 扩展运算符、Immer.js 等）</li>
<li>让 <code>React.memo</code> 的浅比较快速失效，精确重渲染发生变化的项</li>
</ul>
</li>
<li><p><strong>控制更新粒度</strong>：</p>
<ul>
<li>将频繁更新的状态（如点赞按钮）下放到每个列表项组件自身</li>
<li>使用状态管理库避免触发整个列表的根组件更新</li>
</ul>
</li>
</ul>
<h3 id="4-其他辅助优化"><a href="#4-其他辅助优化" class="headerlink" title="4. 其他辅助优化"></a>4. 其他辅助优化</h3><ul>
<li><p><strong>图片懒加载</strong>：</p>
<ul>
<li>使用 <code>loading=&quot;lazy&quot;</code> 属性或 <code>Intersection Observer</code></li>
<li>减少页面初始化时的 HTTP 请求数和带宽占用</li>
</ul>
</li>
<li><p><strong>使用 CSS 属性 <code>contain: content</code></strong>：</p>
<ul>
<li>告诉浏览器元素的子树独立于页面其余部分</li>
<li>减少重绘和重排时的计算量，提升滚动性能</li>
</ul>
</li>
</ul>
<h2 id="数组扁平化、去重、排序"><a href="#数组扁平化、去重、排序" class="headerlink" title="数组扁平化、去重、排序"></a>数组扁平化、去重、排序</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> arr = [ [<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>], [<span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>, <span class="number">5</span>], [<span class="number">6</span>, <span class="number">7</span>, <span class="number">8</span>, <span class="number">9</span>, [<span class="number">11</span>, <span class="number">12</span>, [<span class="number">12</span>, <span class="number">13</span>, [<span class="number">14</span>] ] ] ], <span class="number">10</span>];</span><br><span class="line"></span><br><span class="line"><span class="comment">// 扁平化</span></span><br><span class="line"><span class="keyword">let</span> flatArr = arr.flat(<span class="number">4</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 去重</span></span><br><span class="line"><span class="keyword">let</span> disArr = <span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>(flatArr));</span><br><span class="line"></span><br><span class="line"><span class="comment">// 排序</span></span><br><span class="line"><span class="keyword">let</span> result = disArr.sort(<span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> a - b;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(result);</span><br></pre></td></tr></table></figure>

<h2 id="LeetCode：LRU-缓存机制"><a href="#LeetCode：LRU-缓存机制" class="headerlink" title="LeetCode：LRU 缓存机制"></a>LeetCode：LRU 缓存机制</h2><p>运用你所掌握的数据结构，设计和实现一个 <strong>LRU (最近最少使用)</strong> 缓存机制。它应该支持以下操作：获取数据 get 和写入数据 put。</p>
<ul>
<li>获取数据 <code>get(key)</code> - 如果密钥存在于缓存中，则获取密钥的值（总是正数），否则返回 -1</li>
<li>写入数据 <code>put(key, value)</code> - 如果密钥不存在，则写入数据。当缓存容量达到上限时，它应该在写入新数据之前删除最久未使用的数据，从而为新数据留出空间</li>
</ul>
<p><strong>进阶</strong>：你是否可以在 O(1) 时间复杂度内完成这两种操作？</p>
<p><strong>示例</strong>：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">LRUCache cache = <span class="keyword">new</span> LRUCache(<span class="number">2</span>); <span class="comment">// 缓存容量</span></span><br><span class="line"></span><br><span class="line">cache.put(<span class="number">1</span>, <span class="number">1</span>);</span><br><span class="line">cache.put(<span class="number">2</span>, <span class="number">2</span>);</span><br><span class="line">cache.get(<span class="number">1</span>);       <span class="comment">// 返回 1</span></span><br><span class="line">cache.put(<span class="number">3</span>, <span class="number">3</span>);    <span class="comment">// 该操作会使得密钥 2 作废</span></span><br><span class="line">cache.get(<span class="number">2</span>);       <span class="comment">// 返回 -1 (未找到)</span></span><br><span class="line">cache.put(<span class="number">4</span>, <span class="number">4</span>);    <span class="comment">// 该操作会使得密钥 1 作废</span></span><br><span class="line">cache.get(<span class="number">1</span>);       <span class="comment">// 返回 -1 (未找到)</span></span><br><span class="line">cache.get(<span class="number">3</span>);       <span class="comment">// 返回 3</span></span><br><span class="line">cache.get(<span class="number">4</span>);       <span class="comment">// 返回 4</span></span><br></pre></td></tr></table></figure>

<p><strong>实现</strong>：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> LRUCache &#123;</span><br><span class="line">    max: <span class="built_in">number</span> = <span class="number">0</span>;</span><br><span class="line">    cache: Map&lt;<span class="built_in">number</span>, <span class="built_in">number</span>&gt;;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">constructor</span>(<span class="params">capacity: <span class="built_in">number</span></span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>.max = capacity;</span><br><span class="line">        <span class="keyword">this</span>.cache = <span class="keyword">new</span> Map();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">get</span>(key: <span class="built_in">number</span>): <span class="built_in">number</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; cache &#125; = <span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">let</span> value = cache.get(key);</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">if</span> (value !== <span class="literal">undefined</span>) &#123;</span><br><span class="line">            cache.delete(key);</span><br><span class="line">            cache.set(key, value);</span><br><span class="line">            <span class="keyword">return</span> value;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">-1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    put(key: <span class="built_in">number</span>, value: <span class="built_in">number</span>): <span class="built_in">void</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123; cache &#125; = <span class="keyword">this</span>;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 如果键已存在，先删除再重新插入以更新顺序</span></span><br><span class="line">        <span class="keyword">if</span> (cache.has(key)) &#123;</span><br><span class="line">            cache.delete(key);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 如果缓存已满且要添加新键，删除最久未使用的</span></span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (cache.size &gt;= <span class="keyword">this</span>.max) &#123;</span><br><span class="line">            <span class="keyword">const</span> firstKey = cache.keys().next().value;</span><br><span class="line">            cache.delete(firstKey);</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        cache.set(key, value);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="数组扁平化与去重"><a href="#数组扁平化与去重" class="headerlink" title="数组扁平化与去重"></a>数组扁平化与去重</h2><h2 id="数组扁平化（数组降维）"><a href="#数组扁平化（数组降维）" class="headerlink" title="数组扁平化（数组降维）"></a>数组扁平化（数组降维）</h2><h3 id="Array-prototype-flat-方法"><a href="#Array-prototype-flat-方法" class="headerlink" title="Array.prototype.flat() 方法"></a>Array.prototype.flat() 方法</h3><p>MDN：<code>flat()</code> 方法会按照一个可指定的深度递归遍历数组，并将所有元素与遍历到的子数组中的元素合并为一个新数组返回。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> test = [<span class="string">"a"</span>, [<span class="string">"b"</span>, <span class="string">"c"</span>], [<span class="string">"d"</span>, [<span class="string">"e"</span>, [<span class="string">"f"</span>]], <span class="string">"g"</span>]]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不传参数时，默认扁平化一层</span></span><br><span class="line">test.flat()</span><br><span class="line"><span class="comment">// ["a", "b", "c", "d", ["e", ["f"]], "g"]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 传入一个整数参数，整数即扁平化的层数</span></span><br><span class="line">test.flat(<span class="number">2</span>)</span><br><span class="line"><span class="comment">// ["a", "b", "c", "d", "e", ["f"], "g"]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Infinity 关键字作为参数时，无论多少层嵌套，都会转为一维数组</span></span><br><span class="line">test.flat(<span class="literal">Infinity</span>)</span><br><span class="line"><span class="comment">// ["a", "b", "c", "d", "e", "f", "g"]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 传入 &lt;=0 的整数将返回原数组，不扁平化</span></span><br><span class="line">test.flat(<span class="number">0</span>)</span><br><span class="line">test.flat(<span class="number">-10</span>)</span><br><span class="line"><span class="comment">// ["a", ["b", "c"], ["d", ["e", ["f"]], "g"]]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果原数组有空位，******flat()方法会跳过空位。</span></span><br><span class="line">[<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"d"</span>,,].flat()</span><br><span class="line"><span class="comment">// ["a", "b", "c", "d"]</span></span><br></pre></td></tr></table></figure>

<h3 id="Array-prototype-flat-特性总结"><a href="#Array-prototype-flat-特性总结" class="headerlink" title="Array.prototype.flat() 特性总结"></a>Array.prototype.flat() 特性总结</h3><ul>
<li>用于将嵌套的数组扁平化，变成一维的数组</li>
<li>该方法返回一个新数组，对原数据没有影响</li>
<li>不传参数时，默认扁平化一层</li>
<li>可以传入一个整数，表示想要扁平化的层数</li>
<li>传入 &lt;=0 的整数将返回原数组，不扁平化</li>
<li><code>Infinity</code> 关键字作为参数时，无论多少层嵌套，都会转为一维数组</li>
<li>如果原数组有空位，<code>Array.prototype.flat()</code> 会跳过空位</li>
</ul>
<h2 id="手动实现扁平化方法"><a href="#手动实现扁平化方法" class="headerlink" title="手动实现扁平化方法"></a>手动实现扁平化方法</h2><h3 id="方法一：使用-reduce-方法"><a href="#方法一：使用-reduce-方法" class="headerlink" title="方法一：使用 reduce 方法"></a>方法一：使用 reduce 方法</h3><h4 id="一次性扁平化所有"><a href="#一次性扁平化所有" class="headerlink" title="一次性扁平化所有"></a>一次性扁平化所有</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">flattenDeep</span>(<span class="params">arr</span>) </span>&#123; </span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Array</span>.isArray(arr)</span><br><span class="line">      ? arr.reduce( <span class="function">(<span class="params">acc, cur</span>) =&gt;</span> [...acc, ...flattenDeep(cur)] , [])</span><br><span class="line">      : [arr]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="keyword">var</span> test = [<span class="string">"a"</span>, [<span class="string">"b"</span>, <span class="string">"c"</span>], [<span class="string">"d"</span>, [<span class="string">"e"</span>, [<span class="string">"f"</span>]], <span class="string">"g"</span>]]</span><br><span class="line">flattenDeep(test)</span><br><span class="line"><span class="comment">// ["a", "b", "c", "d", "e", "f", "g"]</span></span><br></pre></td></tr></table></figure>

<h4 id="实现-flat-函数"><a href="#实现-flat-函数" class="headerlink" title="实现 flat 函数"></a>实现 flat 函数</h4><ol>
<li>作业帮一面</li>
</ol>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">flat</span>(<span class="params">arr, depth = <span class="number">1</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> depth &gt; <span class="number">0</span></span><br><span class="line">        ? arr.reduce(<span class="function">(<span class="params">acc, cur</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">Array</span>.isArray(cur)) &#123;</span><br><span class="line">            <span class="keyword">return</span> [...acc, ...flat(cur, depth<span class="number">-1</span>)]</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> [...acc, cur]</span><br><span class="line">    &#125; , [])</span><br><span class="line">      : arr</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="keyword">var</span> test = [<span class="string">"a"</span>, [<span class="string">"b"</span>, <span class="string">"c"</span>], [<span class="string">"d"</span>, [<span class="string">"e"</span>, [<span class="string">"f"</span>]], <span class="string">"g"</span>]]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 不传参数时，默认扁平化一层</span></span><br><span class="line">flat(test)</span><br><span class="line"><span class="comment">// ["a", "b", "c", "d", ["e", ["f"]], "g"]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 传入一个整数参数，整数即扁平化的层数</span></span><br><span class="line">flat(test, <span class="number">2</span>)</span><br><span class="line"><span class="comment">// ["a", "b", "c", "d", "e", ["f"], "g"]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Infinity 关键字作为参数时，无论多少层嵌套，都会转为一维数组</span></span><br><span class="line">flat(test, <span class="literal">Infinity</span>)</span><br><span class="line"><span class="comment">// ["a", "b", "c", "d", "e", "f", "g"]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 传入 &lt;=0 的整数将返回原数组，不扁平化</span></span><br><span class="line">flat(test, <span class="number">0</span>)</span><br><span class="line">flat(test, <span class="number">-10</span>)</span><br><span class="line"><span class="comment">// ["a", ["b", "c"], ["d", ["e", ["f"]], "g"]];</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果原数组有空位，flat()方法会跳过空位。</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>, <span class="string">"d"</span>,,]</span><br><span class="line">flat(arr)</span><br><span class="line"><span class="comment">// ["a", "b", "c", "d"]</span></span><br></pre></td></tr></table></figure>

<h3 id="方法二：使用栈"><a href="#方法二：使用栈" class="headerlink" title="方法二：使用栈"></a>方法二：使用栈</h3><h4 id="一次性降维所有"><a href="#一次性降维所有" class="headerlink" title="一次性降维所有"></a>一次性降维所有</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">flattenDeep</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> result = [] </span><br><span class="line">  <span class="comment">// 将数组元素拷贝至栈，直接赋值会改变原数组</span></span><br><span class="line">  <span class="keyword">const</span> stack = [...arr]</span><br><span class="line">  <span class="comment">// 如果栈不为空，则循环遍历</span></span><br><span class="line">  <span class="keyword">while</span> (stack.length !== <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> val = stack.pop() </span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">Array</span>.isArray(val)) &#123;</span><br><span class="line">      <span class="comment">// 如果是数组再次入栈，并且展开了一层</span></span><br><span class="line">      stack.push(...val) </span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 如果不是数组，就用头插法插入到结果数组中</span></span><br><span class="line">      result.unshift(val)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="keyword">var</span> test = [<span class="string">"a"</span>, [<span class="string">"b"</span>, <span class="string">"c"</span>], [<span class="string">"d"</span>, [<span class="string">"e"</span>, [<span class="string">"f"</span>]], <span class="string">"g"</span>]]</span><br><span class="line">flattenDeep(test)</span><br><span class="line"><span class="comment">// ["a", "b", "c", "d", "e", "f", "g"]</span></span><br></pre></td></tr></table></figure>

<h2 id="数组去重"><a href="#数组去重" class="headerlink" title="数组去重"></a>数组去重</h2><h3 id="方式一：Set（ES6）"><a href="#方式一：Set（ES6）" class="headerlink" title="方式一：Set（ES6）"></a>方式一：Set（ES6）</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique</span>(<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Array</span>.from(<span class="keyword">new</span> <span class="built_in">Set</span>(arr))</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 或者</span></span><br><span class="line"><span class="keyword">var</span> unique = <span class="function"><span class="params">arr</span> =&gt;</span> [...new <span class="built_in">Set</span>(arr)]</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">unique(arr); <span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure>

<h3 id="方式二：reduce"><a href="#方式二：reduce" class="headerlink" title="方式二：reduce"></a>方式二：reduce</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique</span> (<span class="params">arr</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> arr.sort().reduce(<span class="function">(<span class="params">acc, cur</span>) =&gt;</span> &#123;</span><br><span class="line">    	<span class="keyword">if</span> (acc.length === <span class="number">0</span> || acc[acc.length - <span class="number">1</span>] !== cur) &#123;</span><br><span class="line">        	acc.push(cur);</span><br><span class="line">    	&#125;</span><br><span class="line">    	<span class="keyword">return</span> acc</span><br><span class="line">	&#125;, [])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">unique(arr); <span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure>

<h3 id="方法三：filter"><a href="#方法三：filter" class="headerlink" title="方法三：filter"></a>方法三：filter</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">unique</span>(<span class="params">arr</span>) </span>&#123; </span><br><span class="line">    <span class="keyword">return</span> arr.filter( <span class="function">(<span class="params">element, index, array</span>) =&gt;</span> &#123;</span><br><span class="line">    	<span class="keyword">return</span> array.indexOf(element) === index</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="keyword">var</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>, <span class="number">3</span>]</span><br><span class="line">unique(arr); <span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure>

<h2 id="数组原地去重方法"><a href="#数组原地去重方法" class="headerlink" title="数组原地去重方法"></a>数组原地去重方法</h2><h2 id="方法一：排序去重"><a href="#方法一：排序去重" class="headerlink" title="方法一：排序去重"></a>方法一：排序去重</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> removeDuplicates = <span class="function">(<span class="params">nums</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 原地排序</span></span><br><span class="line">    nums.sort()</span><br><span class="line">    <span class="comment">// 去重</span></span><br><span class="line">    <span class="keyword">let</span> len = <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">1</span>; i &lt; nums.length; i++)</span><br><span class="line">        <span class="keyword">if</span> (nums[i] != nums[i<span class="number">-1</span>]) nums[len++] = nums[i];</span><br><span class="line">    <span class="comment">// 删除重复项</span></span><br><span class="line">    nums.splice(len)</span><br><span class="line">    <span class="keyword">return</span> nums</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line">removeDuplicates([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">3</span>])</span><br><span class="line"><span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure>

<p><strong>特点：</strong></p>
<ul>
<li>使用 <code>sort()</code> 方法进行原地排序</li>
<li>通过双指针技巧在排序后的数组中去除重复项</li>
<li>最后使用 <code>splice()</code> 删除多余的重复元素</li>
</ul>
<h2 id="方法二：优化版本"><a href="#方法二：优化版本" class="headerlink" title="方法二：优化版本"></a>方法二：优化版本</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> removeDuplicates = <span class="function">(<span class="params">nums</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> len = nums.length - <span class="number">1</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">let</span> i = len; i&gt;=<span class="number">0</span>; i--) &#123;</span><br><span class="line">        <span class="keyword">if</span>(nums.indexOf(nums[i]) != i) &#123;</span><br><span class="line">            nums[i] = nums[len --]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 删除重复项</span></span><br><span class="line">    nums.splice(len+<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">return</span> nums</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line">removeDuplicates([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">3</span>])</span><br><span class="line"><span class="comment">// [1, 2, 3]</span></span><br></pre></td></tr></table></figure>

<p><strong>特点：</strong></p>
<ul>
<li>从后向前遍历数组</li>
<li>使用 <code>indexOf</code> 检查当前元素是否为重复项</li>
<li>将重复元素与数组末尾元素交换，然后缩短数组长度</li>
<li>最后使用 <code>splice()</code> 删除末尾的重复元素</li>
</ul>
<h2 id="两种方法的比较"><a href="#两种方法的比较" class="headerlink" title="两种方法的比较"></a>两种方法的比较</h2><table>
<thead>
<tr>
<th>方法</th>
<th>优点</th>
<th>缺点</th>
<th>是否保持原顺序</th>
</tr>
</thead>
<tbody><tr>
<td>排序去重</td>
<td>效率较高</td>
<td>改变元素原始顺序</td>
<td>否</td>
</tr>
<tr>
<td>优化版本</td>
<td>保持元素原始顺序</td>
<td>效率相对较低</td>
<td>是</td>
</tr>
</tbody></table>
<h2 id="数组去重函数（支持对象和数组元素）"><a href="#数组去重函数（支持对象和数组元素）" class="headerlink" title="数组去重函数（支持对象和数组元素）"></a>数组去重函数（支持对象和数组元素）</h2><h3 id="需求说明"><a href="#需求说明" class="headerlink" title="需求说明"></a>需求说明</h3><p>实现一个数组去重函数，能够处理包含对象、数组等复杂类型的元素：</p>
<ul>
<li><p>输入：<code>[123, &quot;meili&quot;, &quot;123&quot;, &quot;mogu&quot;, 123]</code></p>
</li>
<li><p>输出：<code>[123, &quot;meili&quot;, &quot;123&quot;, &quot;mogu&quot;]</code></p>
</li>
<li><p>输入：<code>[123, [1, 2, 3], [1, &quot;2&quot;, 3], [1, 2, 3], &quot;meili&quot;]</code></p>
</li>
<li><p>输出：<code>[123, [1, 2, 3], [1, &quot;2&quot;, 3], &quot;meili&quot;]</code></p>
</li>
<li><p>输入：<code>[123, {a: 1}, {a: {b: 1}}, {a: &quot;1&quot;}, {a: {b: 1}}, &quot;meili&quot;]</code></p>
</li>
<li><p>输出：<code>[123, {a: 1}, {a: {b: 1}}, {a: &quot;1&quot;}, &quot;meili&quot;]</code></p>
</li>
</ul>
<h2 id="基础解法：使用-JSON-stringify"><a href="#基础解法：使用-JSON-stringify" class="headerlink" title="基础解法：使用 JSON.stringify"></a>基础解法：使用 JSON.stringify</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> removeDuplicates = <span class="function">(<span class="params">arr</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> map = <span class="keyword">new</span> <span class="built_in">Map</span>()</span><br><span class="line">    arr.forEach(<span class="function"><span class="params">item</span> =&gt;</span> &#123;</span><br><span class="line">        map.set(<span class="built_in">JSON</span>.stringify(item), item)</span><br><span class="line">    &#125;)</span><br><span class="line">    <span class="keyword">return</span> [...map.values()]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line">removeDuplicates([<span class="number">123</span>, <span class="string">"meili"</span>, <span class="string">"123"</span>, <span class="string">"mogu"</span>, <span class="number">123</span>])</span><br><span class="line"><span class="comment">// [123, "meili", "123", "mogu"]</span></span><br><span class="line"></span><br><span class="line">removeDuplicates([<span class="number">123</span>, [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], [<span class="number">1</span>, <span class="string">"2"</span>, <span class="number">3</span>], [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>], <span class="string">"meili"</span>])</span><br><span class="line"><span class="comment">// [123, [1, 2, 3], [1, "2", 3], "meili"]</span></span><br><span class="line"></span><br><span class="line">removeDuplicates([<span class="number">123</span>, &#123;<span class="attr">a</span>: <span class="number">1</span>&#125;, &#123;<span class="attr">a</span>: &#123;<span class="attr">b</span>: <span class="number">1</span>&#125;&#125;, &#123;<span class="attr">a</span>: <span class="string">"1"</span>&#125;, &#123;<span class="attr">a</span>: &#123;<span class="attr">b</span>: <span class="number">1</span>&#125;&#125;, <span class="string">"meili"</span>])</span><br><span class="line"><span class="comment">// [123, &#123;a: 1&#125;, &#123;a: &#123;b: 1&#125;&#125;, &#123;a: "1"&#125;, "meili"]</span></span><br></pre></td></tr></table></figure>

<h2 id="问题分析"><a href="#问题分析" class="headerlink" title="问题分析"></a>问题分析</h2><p>使用 <code>JSON.stringify</code> 的局限性：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> o1 = &#123;<span class="attr">a</span>:<span class="number">1</span>, <span class="attr">b</span>:<span class="number">2</span>&#125;</span><br><span class="line"><span class="keyword">let</span> o2 = &#123;<span class="attr">b</span>:<span class="number">2</span>, <span class="attr">a</span>:<span class="number">1</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">JSON</span>.stringify(o1)</span><br><span class="line"><span class="comment">// "&#123;"a":1,"b":2&#125;"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">JSON</span>.stringify(o2)</span><br><span class="line"><span class="comment">// "&#123;"b":2,"a":1&#125;"</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">JSON</span>.stringify(o1) === <span class="built_in">JSON</span>.stringify(o2)</span><br><span class="line"><span class="comment">// false</span></span><br></pre></td></tr></table></figure>

<p><strong>问题</strong>：对象键顺序不同会被认为是不同的元素。</p>
<h2 id="解决方案"><a href="#解决方案" class="headerlink" title="解决方案"></a>解决方案</h2><h3 id="解决思路"><a href="#解决思路" class="headerlink" title="解决思路"></a>解决思路</h3><p>一个数组（包含对象等类型元素）去重函数，需要在基础类型判断相等条件下满足以下条件：</p>
<ul>
<li>如果元素是数组类型，则需要数组中的每一项相等</li>
<li>如果元素是对象类型，则需要对象中的每个键值对相等</li>
</ul>
<p>去重本身就是遍历数组，然后比较数组中的每一项是否相等而已，所以关键步骤有两步：<strong>比较</strong>、<strong>去重</strong></p>
<p><strong>比较</strong>：</p>
<ol>
<li>首先判断类型是否一致，类型不一致则认为两个数组元素是不同的</li>
<li>如果是数组类型，则递归比较数组中的每个元素是否相等</li>
<li>如果是对象类型，则递归比较对象中的每个键值对是否相等</li>
<li>否则，直接 <code>===</code> 比较</li>
</ol>
<p><strong>去重</strong>：</p>
<ul>
<li>采用 <code>reduce</code> 去重，初始 <code>accumulator</code> 为 <code>[]</code></li>
<li>采用 <code>findIndex</code> 找到 <code>accumulator</code> 是否包含相同元素</li>
<li>如果不包含则加入，否则不加入</li>
<li>返回最终的 <code>accumulator</code>，则为去重后的数组</li>
</ul>
<h3 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 获取类型</span></span><br><span class="line"><span class="keyword">const</span> getType = (<span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> class2type = &#123;</span><br><span class="line">        <span class="string">'[object Boolean]'</span>: <span class="string">'boolean'</span>, </span><br><span class="line">        <span class="string">'[object Number]'</span>: <span class="string">'number'</span>, </span><br><span class="line">        <span class="string">'[object String]'</span>: <span class="string">'string'</span>, </span><br><span class="line">        <span class="string">'[object Function]'</span>: <span class="string">'function'</span>, </span><br><span class="line">        <span class="string">'[object Array]'</span>: <span class="string">'array'</span>, </span><br><span class="line">        <span class="string">'[object Date]'</span>: <span class="string">'date'</span>, </span><br><span class="line">        <span class="string">'[object RegExp]'</span>: <span class="string">'regexp'</span>, </span><br><span class="line">        <span class="string">'[object Object]'</span>: <span class="string">'object'</span>, </span><br><span class="line">        <span class="string">'[object Error]'</span>: <span class="string">'error'</span>, </span><br><span class="line">        <span class="string">'[object Symbol]'</span>: <span class="string">'symbol'</span> </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> <span class="title">getType</span>(<span class="params">obj</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (obj == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> obj + <span class="string">''</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// javascript高级程序设计中提供了一种方法,可以通用的来判断原始数据类型和引用数据类型</span></span><br><span class="line">        <span class="keyword">const</span> str = <span class="built_in">Object</span>.prototype.toString.call(obj)</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">typeof</span> obj === <span class="string">'object'</span> || <span class="keyword">typeof</span> obj === <span class="string">'function'</span> ? class2type[str] || <span class="string">'object'</span> : <span class="keyword">typeof</span> obj</span><br><span class="line">    &#125;;</span><br><span class="line">&#125;)();</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 判断两个元素是否相等</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;any&#125;</span> </span>o1 比较元素</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@param <span class="type">&#123;any&#125;</span> </span>o2 其他元素</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@returns <span class="type">&#123;Boolean&#125;</span> </span>是否相等</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">const</span> isEqual = <span class="function">(<span class="params">o1, o2</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> t1 = getType(o1)</span><br><span class="line">    <span class="keyword">const</span> t2 = getType(o2)</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 比较类型是否一致</span></span><br><span class="line">    <span class="keyword">if</span> (t1 !== t2) <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 类型一致</span></span><br><span class="line">    <span class="keyword">if</span> (t1 === <span class="string">'array'</span>) &#123;</span><br><span class="line">        <span class="comment">// 首先判断数组包含元素个数是否相等</span></span><br><span class="line">        <span class="keyword">if</span> (o1.length !== o2.length) <span class="keyword">return</span> <span class="literal">false</span> </span><br><span class="line">        <span class="comment">// 比较两个数组中的每个元素</span></span><br><span class="line">        <span class="keyword">return</span> o1.every(<span class="function">(<span class="params">item, i</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> isEqual(item, o2[i])</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (t1 === <span class="string">'object'</span>) &#123;</span><br><span class="line">        <span class="comment">// object类型比较类似数组</span></span><br><span class="line">        <span class="keyword">const</span> keysArr = <span class="built_in">Object</span>.keys(o1)</span><br><span class="line">        <span class="keyword">if</span> (keysArr.length !== <span class="built_in">Object</span>.keys(o2).length) <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        <span class="comment">// 比较每一个元素</span></span><br><span class="line">        <span class="keyword">return</span> keysArr.every(<span class="function"><span class="params">k</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> isEqual(o1[k], o2[k])</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> o1 === o2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 数组去重</span></span><br><span class="line"><span class="keyword">const</span> removeDuplicates = <span class="function">(<span class="params">arr</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> arr.reduce(<span class="function">(<span class="params">accumulator, current</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> hasIndex = accumulator.findIndex(<span class="function"><span class="params">item</span> =&gt;</span> isEqual(current, item))</span><br><span class="line">        <span class="keyword">if</span> (hasIndex === <span class="number">-1</span>) &#123;</span><br><span class="line">            accumulator.push(current)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> accumulator</span><br><span class="line">    &#125;, [])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line">removeDuplicates([<span class="number">123</span>, &#123;<span class="attr">a</span>: <span class="number">1</span>&#125;, &#123;<span class="attr">a</span>: &#123;<span class="attr">b</span>: <span class="number">1</span>&#125;&#125;, &#123;<span class="attr">a</span>: <span class="string">"1"</span>&#125;, &#123;<span class="attr">a</span>: &#123;<span class="attr">b</span>: <span class="number">1</span>&#125;&#125;, <span class="string">"meili"</span>, &#123;<span class="attr">a</span>:<span class="number">1</span>, <span class="attr">b</span>:<span class="number">2</span>&#125;, &#123;<span class="attr">b</span>:<span class="number">2</span>, <span class="attr">a</span>:<span class="number">1</span>&#125;])</span><br><span class="line"><span class="comment">// [123, &#123;a: 1&#125;, &#123;a: &#123;b: 1&#125;&#125;, &#123;a: "1"&#125;, "meili", &#123;a: 1, b: 2&#125;]</span></span><br></pre></td></tr></table></figure>

<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>这种方法解决了 <code>JSON.stringify</code> 在面对对象键顺序不同时的局限性，通过深度比较实现了真正的对象内容去重。</p>
<h3 id=""><a href="#" class="headerlink" title=""></a></h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 模拟异步数据获取</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span>* <span class="title">asyncNumberGenerator</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">yield</span> <span class="keyword">await</span> <span class="built_in">Promise</span>.resolve(<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">yield</span> <span class="keyword">await</span> <span class="built_in">Promise</span>.resolve(<span class="number">2</span>);</span><br><span class="line">  <span class="keyword">yield</span> <span class="keyword">await</span> <span class="built_in">Promise</span>.resolve(<span class="number">3</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 使用 for await...of 遍历</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">processNumbers</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">for</span> <span class="keyword">await</span> (<span class="keyword">const</span> num <span class="keyword">of</span> asyncNumberGenerator()) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(num); <span class="comment">// 依次输出: 1, 2, 3</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">processNumbers();</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 模拟多个异步操作</span></span><br><span class="line"><span class="keyword">const</span> fetchUserData = <span class="function">(<span class="params">id, delay</span>) =&gt;</span> </span><br><span class="line">  <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span> =&gt;</span> </span><br><span class="line">    setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> resolve(<span class="string">`用户<span class="subst">$&#123;id&#125;</span>的数据`</span>), delay)</span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> promises = [</span><br><span class="line">  fetchUserData(<span class="number">1</span>, <span class="number">1000</span>),</span><br><span class="line">  fetchUserData(<span class="number">2</span>, <span class="number">500</span>),</span><br><span class="line">  fetchUserData(<span class="number">3</span>, <span class="number">1500</span>)</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">processUsers</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'开始获取用户数据...'</span>);</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">for</span> <span class="keyword">await</span> (<span class="keyword">const</span> userData <span class="keyword">of</span> promises) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'收到:'</span>, userData);</span><br><span class="line">    <span class="comment">// 按完成顺序输出，不是按数组顺序</span></span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'所有数据获取完成'</span>);</span><br><span class="line">&#125;</span><br><span class="line">processUsers();</span><br></pre></td></tr></table></figure>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Node.js 文件系统示例</span></span><br><span class="line"><span class="keyword">import</span> &#123; createReadStream &#125; <span class="keyword">from</span> <span class="string">'fs'</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; createInterface &#125; <span class="keyword">from</span> <span class="string">'readline'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">readLargeFile</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> fileStream = createReadStream(<span class="string">'large-file.txt'</span>);</span><br><span class="line">  <span class="keyword">const</span> rl = createInterface(&#123;</span><br><span class="line">    input: fileStream,</span><br><span class="line">    crlfDelay: <span class="literal">Infinity</span></span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">let</span> lineCount = <span class="number">0</span>;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">for</span> <span class="keyword">await</span> (<span class="keyword">const</span> line <span class="keyword">of</span> rl) &#123;</span><br><span class="line">    lineCount++;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">`第<span class="subst">$&#123;lineCount&#125;</span>行:`</span>, line);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 可以在这里处理每一行，不会阻塞其他操作</span></span><br><span class="line">    <span class="keyword">if</span> (lineCount &gt;= <span class="number">10</span>) &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'只显示前10行'</span>);</span><br><span class="line">      <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`总共处理了 <span class="subst">$&#123;lineCount&#125;</span> 行`</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// 同步 vs 异步迭代对比</span></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">compareIteration</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> syncArray = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>];</span><br><span class="line">  <span class="keyword">const</span> asyncArray = [</span><br><span class="line">    <span class="built_in">Promise</span>.resolve(<span class="number">1</span>),</span><br><span class="line">    <span class="built_in">Promise</span>.resolve(<span class="number">2</span>),</span><br><span class="line">    <span class="built_in">Promise</span>.resolve(<span class="number">3</span>)</span><br><span class="line">  ];</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'=== 同步迭代 ==='</span>);</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">const</span> item <span class="keyword">of</span> syncArray) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(item); <span class="comment">// 立即输出 1, 2, 3</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'=== 异步迭代 ==='</span>);</span><br><span class="line">  <span class="keyword">for</span> <span class="keyword">await</span> (<span class="keyword">const</span> item <span class="keyword">of</span> asyncArray) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(item); <span class="comment">// 等待 Promise 解决后输出 1, 2, 3</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">compareIteration();</span><br></pre></td></tr></table></figure>

<h3 id="手写aysnc和await"><a href="#手写aysnc和await" class="headerlink" title="手写aysnc和await"></a>手写aysnc和await</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ffunction asyncToGenerator(genFunc) &#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">...args</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> gen = genFunc.apply(<span class="keyword">this</span>, args);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="function"><span class="keyword">function</span> <span class="title">step</span>(<span class="params">key, arg</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">let</span> result;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          result = gen[key](arg);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">          <span class="keyword">return</span> reject(err);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> &#123; value, done &#125; = result;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (done) &#123;</span><br><span class="line">          <span class="keyword">return</span> resolve(value);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="built_in">Promise</span>.resolve(value).then(</span><br><span class="line">          val =&gt; step(<span class="string">"next"</span>, val),</span><br><span class="line">          err =&gt; step(<span class="string">"throw"</span>, err)</span><br><span class="line">        );</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      step(<span class="string">"next"</span>);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ----------------------------</span></span><br><span class="line"><span class="comment">// 测试代码</span></span><br><span class="line"><span class="comment">// ----------------------------</span></span><br><span class="line"><span class="function"><span class="keyword">function</span>* <span class="title">testGen</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> a = <span class="keyword">yield</span> <span class="built_in">Promise</span>.resolve(<span class="number">1</span>);</span><br><span class="line">  <span class="keyword">const</span> b = <span class="keyword">yield</span> <span class="built_in">Promise</span>.resolve(a + <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">return</span> b + <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> test = asyncToGenerator(testGen);</span><br><span class="line"></span><br><span class="line">test().then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"结果: "</span>, res); <span class="comment">// 3</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>


<h3 id="合并两个有序数组"><a href="#合并两个有序数组" class="headerlink" title="合并两个有序数组"></a>合并两个有序数组</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> merge = <span class="function"><span class="keyword">function</span>(<span class="params">nums1, m, nums2, n</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> len1 = m<span class="number">-1</span>,</span><br><span class="line">        len2 = n<span class="number">-1</span>,</span><br><span class="line">        len = m+n<span class="number">-1</span></span><br><span class="line">    <span class="keyword">while</span>(len2 &gt;=<span class="number">0</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(len1&lt;<span class="number">0</span>)&#123;</span><br><span class="line">            nums1[len--] = nums2[len2--]</span><br><span class="line">            <span class="keyword">continue</span></span><br><span class="line">        &#125;</span><br><span class="line">        nums1[len--] = nums1[len1] &gt;= nums2[len2] ? nums1[len1--] : nums2[len2--]</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="js判断数据类型"><a href="#js判断数据类型" class="headerlink" title="js判断数据类型"></a>js判断数据类型</h2><p><code>typeof 判断</code><br><code>Array.isArray()</code><br><code>instanceof</code><br><code>Object.prototype.toString.call()</code></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typeof</span> <span class="number">123</span>          <span class="comment">// "number"</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="string">"abc"</span>        <span class="comment">// "string"</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">true</span>         <span class="comment">// "boolean"</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">undefined</span>    <span class="comment">// "undefined"</span></span><br><span class="line"><span class="keyword">typeof</span> &#123;&#125;           <span class="comment">// "object"</span></span><br><span class="line"><span class="keyword">typeof</span> []           <span class="comment">// "object"  ⚠️数组也返回 object</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="literal">null</span>         <span class="comment">// "object"  ⚠️历史 bug</span></span><br><span class="line"><span class="keyword">typeof</span> <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;&#125; <span class="comment">// "function"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="built_in">Array</span>.isArray([])   <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Array</span>.isArray(&#123;&#125;)   <span class="comment">// false</span></span><br><span class="line"></span><br><span class="line">[] <span class="keyword">instanceof</span> <span class="built_in">Array</span>      <span class="comment">// true</span></span><br><span class="line">&#123;&#125; <span class="keyword">instanceof</span> <span class="built_in">Object</span>     <span class="comment">// true</span></span><br><span class="line"><span class="keyword">new</span> <span class="built_in">Date</span>() <span class="keyword">instanceof</span> <span class="built_in">Date</span> <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="number">123</span>)        <span class="comment">// "[object Number]"</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="string">"abc"</span>)      <span class="comment">// "[object String]"</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="literal">true</span>)       <span class="comment">// "[object Boolean]"</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call([])         <span class="comment">// "[object Array]"</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(&#123;&#125;)         <span class="comment">// "[object Object]"</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="literal">null</span>)       <span class="comment">// "[object Null]"</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="literal">undefined</span>)  <span class="comment">// "[object Undefined]"</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="keyword">new</span> <span class="built_in">Date</span>()) <span class="comment">// "[object Date]"</span></span><br><span class="line"><span class="built_in">Object</span>.prototype.toString.call(<span class="regexp">/abc/</span>)      <span class="comment">// "[object RegExp]"</span></span><br></pre></td></tr></table></figure>
<h2 id="map实现reduce"><a href="#map实现reduce" class="headerlink" title="map实现reduce"></a>map实现reduce</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myReduceMap</span>(<span class="params">arr, callback, initialValue</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> hasInitial = <span class="built_in">arguments</span>.length &gt; <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">let</span> accumulator = hasInitial ? initialValue : arr[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">  arr.forEach(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 如果没有初始值，跳过第一个元素</span></span><br><span class="line">    <span class="keyword">if</span> (!hasInitial &amp;&amp; index === <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">    accumulator = callback(accumulator, item, index, arr);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> accumulator;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> sum = myReduceMap(arr, (acc, cur) =&gt; acc + cur, <span class="number">0</span>);</span><br><span class="line"><span class="built_in">console</span>.log(sum); <span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> sumNoInit = myReduceMap(arr, (acc, cur) =&gt; acc + cur);</span><br><span class="line"><span class="built_in">console</span>.log(sumNoInit); <span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> product = myReduceMap(arr, (acc, cur) =&gt; acc * cur, <span class="number">1</span>);</span><br><span class="line"><span class="built_in">console</span>.log(product); <span class="comment">// 24</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myReduceMap</span>(<span class="params">arr, callback, initialValue</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> hasInitial = <span class="built_in">arguments</span>.length &gt; <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">let</span> accumulator = hasInitial ? initialValue : arr[<span class="number">0</span>];</span><br><span class="line"></span><br><span class="line">  arr.forEach(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 如果没有初始值，跳过第一个元素</span></span><br><span class="line">    <span class="keyword">if</span> (!hasInitial &amp;&amp; index === <span class="number">0</span>) <span class="keyword">return</span>;</span><br><span class="line">    accumulator = callback(accumulator, item, index, arr);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> accumulator;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> sum = myReduceMap(arr, (acc, cur) =&gt; acc + cur, <span class="number">0</span>);</span><br><span class="line"><span class="built_in">console</span>.log(sum); <span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> sumNoInit = myReduceMap(arr, (acc, cur) =&gt; acc + cur);</span><br><span class="line"><span class="built_in">console</span>.log(sumNoInit); <span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> product = myReduceMap(arr, (acc, cur) =&gt; acc * cur, <span class="number">1</span>);</span><br><span class="line"><span class="built_in">console</span>.log(product); <span class="comment">// 24</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myReduce</span>(<span class="params">arr, callback, initialValue</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> hasInitial = <span class="built_in">arguments</span>.length &gt; <span class="number">2</span>; <span class="comment">// 判断是否传了初始值</span></span><br><span class="line">  <span class="keyword">let</span> accumulator = hasInitial ? initialValue : arr[<span class="number">0</span>];</span><br><span class="line">  <span class="keyword">let</span> startIndex = hasInitial ? <span class="number">0</span> : <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">let</span> i = startIndex; i &lt; arr.length; i++) &#123;</span><br><span class="line">    accumulator = callback(accumulator, arr[i], i, arr);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> accumulator;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> sum = myReduce(arr, (acc, cur) =&gt; acc + cur, <span class="number">0</span>);</span><br><span class="line"><span class="built_in">console</span>.log(sum); <span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> sumNoInit = myReduce(arr, (acc, cur) =&gt; acc + cur);</span><br><span class="line"><span class="built_in">console</span>.log(sumNoInit); <span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> product = myReduce(arr, (acc, cur) =&gt; acc * cur, <span class="number">1</span>);</span><br><span class="line"><span class="built_in">console</span>.log(product); <span class="comment">// 24</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mapReduce</span>(<span class="params">arr, callback, initialValue</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(arr.length === <span class="number">0</span>) <span class="keyword">return</span> initialValue;</span><br><span class="line">  <span class="keyword">const</span> accArray = arr.map(<span class="function">(<span class="params">item, index</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(index === <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> callback(initialValue, item, index, arr)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> callback(accArray[index<span class="number">-1</span>], item, index, arr)</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> accArray[accArray.length<span class="number">-1</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">functionalReduce</span>(<span class="params">arr, callback, initialValue</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (arr.length === <span class="number">0</span>) <span class="keyword">return</span> initialValue;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> accArray = arr.map(<span class="function">(<span class="params">item, index</span>) =&gt;</span></span><br><span class="line">    index === <span class="number">0</span></span><br><span class="line">      ? callback(initialValue, item, index, arr)        <span class="comment">// 第一项累加初始值</span></span><br><span class="line">      : callback(accArray[index - <span class="number">1</span>], item, index, arr) <span class="comment">// 后续项累加上前一步</span></span><br><span class="line">  );</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> accArray[arr.length - <span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 测试</span></span><br><span class="line"><span class="keyword">const</span> arr = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>];</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> sum = functionalReduce(arr, (acc, cur) =&gt; acc + cur, <span class="number">0</span>);</span><br><span class="line"><span class="built_in">console</span>.log(sum); <span class="comment">// 10</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> product = functionalReduce(arr, (acc, cur) =&gt; acc * cur, <span class="number">1</span>);</span><br><span class="line"><span class="built_in">console</span>.log(product); <span class="comment">// 24</span></span><br></pre></td></tr></table></figure>

<h2 id="Jsx和React-createElement"><a href="#Jsx和React-createElement" class="headerlink" title="Jsx和React.createElement()"></a>Jsx和React.createElement()</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> name = <span class="string">'Alice'</span>;</span><br><span class="line"><span class="keyword">const</span> element = <span class="xml"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello, &#123;name&#125;<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> element = React.createElement(</span><br><span class="line">  <span class="string">'h1'</span>,</span><br><span class="line">  <span class="literal">null</span>,</span><br><span class="line">  <span class="string">`Hello, <span class="subst">$&#123;name&#125;</span>`</span> <span class="comment">// 注意这是 JS 表达式求值后的结果</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">+------------------------------------------------------+</span><br><span class="line">|                      JSON                            |</span><br><span class="line">|------------------------------------------------------|</span><br><span class="line">| &#123;                                                    |</span><br><span class="line">|   &quot;type&quot;: &quot;BinaryExpression&quot;,                        |</span><br><span class="line">|   &quot;operator&quot;: &quot;+&quot;,                                   |</span><br><span class="line">|   &quot;left&quot;: &#123; &quot;type&quot;: &quot;NumericLiteral&quot;, &quot;value&quot;: 1 &#125;,  |</span><br><span class="line">|   &quot;right&quot;: &#123; &quot;type&quot;: &quot;NumericLiteral&quot;, &quot;value&quot;: 2 &#125;  |</span><br><span class="line">| &#125;                                                    |</span><br><span class="line">+------------------------------------------------------+</span><br><span class="line">                          |</span><br><span class="line">                          v</span><br><span class="line">+------------------------------------------------------+</span><br><span class="line">|                        AST                            |</span><br><span class="line">|------------------------------------------------------|</span><br><span class="line">|                BinaryExpression                       |</span><br><span class="line">|                   &#x2F;           \                       |</span><br><span class="line">|    NumericLiteral(1)     NumericLiteral(2)            |</span><br><span class="line">+------------------------------------------------------+</span><br><span class="line">                          |</span><br><span class="line">                          v</span><br><span class="line">+------------------------------------------------------+</span><br><span class="line">|                   Babel Parser                        |</span><br><span class="line">+------------------------------------------------------+</span><br><span class="line">                          |</span><br><span class="line">                          v</span><br><span class="line">+------------------------------------------------------+</span><br><span class="line">|                    JavaScript                         |</span><br><span class="line">|------------------------------------------------------|</span><br><span class="line">|                const a &#x3D; 1 + 2;                       |</span><br><span class="line">+------------------------------------------------------+</span><br></pre></td></tr></table></figure>

<p>低代码平台的核心就是“配置转代码”和“代码回流配置”。<br>用户拖拽产生的是 JSON Schema，我会把这个 Schema 转成 AST，使用 Babel Types 生成 JSX，再用 Generator 输出 React/Vue 代码。<br>用户修改代码时，我反向用<code>Babel Parser</code>把代码解析成AST，再还原成<code>JSON Schema</code>，这样可视化和代码能双向同步。<br>事件表达式、安全校验、自动 import、属性补全、跨端转换（React → H5/Native）也都是基于<code>AST</code>的遍历和重写完成的。<br>所以AST是低代码的“编译器基础设施”.</p>
<h2 id="AST转换"><a href="#AST转换" class="headerlink" title="AST转换"></a>AST转换</h2><p>为什么前端<code>AST</code>转换用<code>DFS</code>？<br>因为Babel、ESLint都是基于<code>DFS preOrder + postOrder</code>的。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ast = &#123;</span><br><span class="line">  type: <span class="string">"BinaryExpression"</span>,</span><br><span class="line">  operator: <span class="string">"+"</span>,</span><br><span class="line">  left: &#123;</span><br><span class="line">    type: <span class="string">"NumericLiteral"</span>,</span><br><span class="line">    value: <span class="number">1</span></span><br><span class="line">  &#125;,</span><br><span class="line">  right: &#123;</span><br><span class="line">    type: <span class="string">"BinaryExpression"</span>,</span><br><span class="line">    operator: <span class="string">"*"</span>,</span><br><span class="line">    left: &#123; <span class="attr">type</span>: <span class="string">"NumericLiteral"</span>, <span class="attr">value</span>: <span class="number">2</span> &#125;,</span><br><span class="line">    right: &#123; <span class="attr">type</span>: <span class="string">"NumericLiteral"</span>, <span class="attr">value</span>: <span class="number">3</span> &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">traverse</span>(<span class="params">node, callback</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(!node) <span class="keyword">return</span>;</span><br><span class="line">  callback(node)</span><br><span class="line">  <span class="keyword">if</span>(node.left) traverse(node.left, callback)</span><br><span class="line">  <span class="keyword">if</span>(node.right) traverse(node.right, callback)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">traverse(ast, (node) =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">"visit:"</span>, node.type);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h2 id="预加载"><a href="#预加载" class="headerlink" title="预加载"></a>预加载</h2><p>❓“preload 和 prefetch 区别是什么？”<br>完美回答：<br>preload 是为当前页面做的高优先级加载；<br>prefetch 是为未来页面做的低优先级加载。<br>preload 立即加载并参与渲染；<br>prefetch 在空闲时间加载，不阻塞当前渲染。<br>❓“preload 字体为什么要加 crossorigin？”<br>因为字体是跨域资源，浏览器需要使用 CORS 才能缓存。<br>否则会重复下载两次。<br>❓“什么时候用 preconnect？”<br>当你要请求第三方域名（CDN、API、字体）时，提前建好连接，可以减少 50~300ms 的延迟。</p>
<ol start="7">
<li>最佳实践（实际项目中这样写）<br>🌟 推荐的 HTML 头部<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 提前解析 DNS --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"dns-prefetch"</span> <span class="attr">href</span>=<span class="string">"//cdn.example.com"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 提前建立连接 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"preconnect"</span> <span class="attr">href</span>=<span class="string">"https://cdn.example.com"</span> <span class="attr">crossorigin</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 首屏关键 CSS / JS --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"preload"</span> <span class="attr">href</span>=<span class="string">"/static/main.css"</span> <span class="attr">as</span>=<span class="string">"style"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"preload"</span> <span class="attr">href</span>=<span class="string">"/static/main.js"</span> <span class="attr">as</span>=<span class="string">"script"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!-- 字体 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"preload"</span> <span class="attr">href</span>=<span class="string">"/fonts/myfont.woff2"</span> <span class="attr">as</span>=<span class="string">"font"</span> <span class="attr">crossorigin</span>&gt;</span></span><br></pre></td></tr></table></figure>

</li>
</ol>
<h3 id="浅拷贝和深拷贝"><a href="#浅拷贝和深拷贝" class="headerlink" title="浅拷贝和深拷贝"></a>浅拷贝和深拷贝</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//浅拷贝</span></span><br><span class="line"><span class="keyword">const</span> copy1 = &#123;...obj&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> copy2 = <span class="built_in">Object</span>.assign(&#123;&#125;, obj)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> copy3 = arr.slice();</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> copy4 = <span class="built_in">Array</span>.from(arr)</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//深拷贝</span></span><br><span class="line"><span class="keyword">const</span> deepCopy1 = <span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(obj))</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> deepClone(obj)&#123;</span><br><span class="line">  <span class="keyword">if</span>(obj===<span class="literal">null</span> || <span class="keyword">typeof</span> obj !== <span class="string">'object'</span>) <span class="keyword">return</span> obj;</span><br><span class="line">  <span class="keyword">if</span>(obj <span class="keyword">instanceof</span> <span class="built_in">Date</span>) <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Date</span>(obj);</span><br><span class="line">  <span class="keyword">if</span>(obj <span class="keyword">instanceof</span> <span class="built_in">Array</span>) <span class="keyword">return</span> obj.map(<span class="function"><span class="params">item</span> =&gt;</span> deepClone(item));</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> cloned = &#123;&#125;;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> key <span class="keyword">in</span> obj)&#123;</span><br><span class="line">    <span class="keyword">if</span>(obj.hasOwnProperty(key))&#123;</span><br><span class="line">      cloned[key] = deepClone(obj(key))</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> cloned</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> deepCopy3 = _.cloneDeep(obj)</span><br></pre></td></tr></table></figure>

<h3 id="JSON方法深拷贝的局限性"><a href="#JSON方法深拷贝的局限性" class="headerlink" title="JSON方法深拷贝的局限性"></a>JSON方法深拷贝的局限性</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> obj = &#123;</span><br><span class="line">  date: <span class="keyword">new</span> <span class="built_in">Date</span>(),           <span class="comment">// 会被转为字符串</span></span><br><span class="line">  func: <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;&#125;,        <span class="comment">// 会被丢失</span></span><br><span class="line">  <span class="literal">undefined</span>: <span class="literal">undefined</span>,       <span class="comment">// 会被丢失</span></span><br><span class="line">  infinity: <span class="literal">Infinity</span>,         <span class="comment">// 会被转为 null</span></span><br><span class="line">  regexp: <span class="regexp">/pattern/</span>,          <span class="comment">// 会被转为空对象</span></span><br><span class="line">  symbol: <span class="built_in">Symbol</span>(<span class="string">'foo'</span>),      <span class="comment">// 会被丢失</span></span><br><span class="line">  <span class="comment">// 循环引用会导致错误</span></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 循环引用问题</span></span><br><span class="line">obj.self = obj;</span><br><span class="line"><span class="built_in">JSON</span>.parse(<span class="built_in">JSON</span>.stringify(obj)); <span class="comment">// 报错：Converting circular structure to JSON</span></span><br></pre></td></tr></table></figure>
<h2 id="DFS，二叉树，前中后序，以及插入部分BFS的理论知识"><a href="#DFS，二叉树，前中后序，以及插入部分BFS的理论知识" class="headerlink" title="DFS，二叉树，前中后序，以及插入部分BFS的理论知识"></a>DFS，二叉树，前中后序，以及插入部分BFS的理论知识</h2><p>DFS只有先序（pre-order）和后序（post-order），没有“中序”。<br>而“前序/中序/后序”是二叉树独有的概念。</p>
<h3 id="👉-DFS-先序-后序"><a href="#👉-DFS-先序-后序" class="headerlink" title="👉 DFS 先序 / 后序"></a>👉 DFS 先序 / 后序</h3><p>是泛树的概念，只有 “先访问自己 OR 后访问自己”。DFS = Depth First Search（深度优先搜索）</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 伪代码</span></span><br><span class="line"><span class="comment">// DFS先序遍历（pre-order）</span></span><br><span class="line"><span class="comment">// 当前节点-&gt; 子节点们</span></span><br><span class="line"><span class="comment">// 特点：</span></span><br><span class="line"><span class="comment">// “一到节点就访问”。</span></span><br><span class="line"><span class="comment">// 用在：如构建路径、生成遍历顺序、表达式树生成前缀表达式等。</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dfs</span>(<span class="params">node</span>)</span>&#123;</span><br><span class="line"> <span class="keyword">if</span>(!node) <span class="keyword">return</span>;</span><br><span class="line"> visit(node)</span><br><span class="line"> <span class="keyword">for</span>(<span class="keyword">let</span> child <span class="keyword">of</span> node.children)&#123;</span><br><span class="line">  dfs(child)</span><br><span class="line"> &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// DFS后序遍历（post-order）</span></span><br><span class="line"><span class="comment">// 子节点们-&gt; 当前节点</span></span><br><span class="line"><span class="comment">// “处理完所有孩子再处理自己”。</span></span><br><span class="line"><span class="comment">// 用在：如求文件夹大小（先算子文件夹大小，再汇总到父级）、表达式树计算、树DP。</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dfs</span>(<span class="params">node</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(!node) <span class="keyword">return</span>;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">let</span> child <span class="keyword">of</span> node.children)&#123;</span><br><span class="line">    dfs(child)</span><br><span class="line">  &#125;</span><br><span class="line">  visit(node)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1. JSON / 配置树结构处理（超高频）</span></span><br><span class="line"><span class="comment">// 比如权限树、侧边栏菜单、路由表。</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">dfsMenu</span>(<span class="params">tree</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">for</span>(<span class="keyword">const</span> node <span class="keyword">of</span> tree)&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(node.title)</span><br><span class="line">    <span class="keyword">if</span>(node.children)&#123;</span><br><span class="line">      dfsMenu(node.children)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 2. 虚拟 DOM 遍历（React / Vue）</span></span><br><span class="line"><span class="comment">// Virtual DOM 的 diff 和 patch 都依赖 DFS。</span></span><br><span class="line"><span class="comment">// 对每个 vnode → 深度优先往下遍历子节点</span></span><br><span class="line"><span class="comment">// 一路走到叶子节点</span></span><br><span class="line"><span class="comment">// 再回溯更新</span></span><br><span class="line"><span class="comment">// 面试说法：</span></span><br><span class="line"><span class="comment">// Virtual DOM 的渲染和 diff 都是 DFS 先序遍历（pre-order），因为要先创建父节点再进入子节点。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3. AST（抽象语法树）遍历（编译、Babel、ESLint）</span></span><br><span class="line"><span class="comment">// 代码分析、source-map、webpack loader 都是 AST DFS 遍历。</span></span><br><span class="line"><span class="comment">// AST是树结构，编译器通过DFS后序遍历生成代码，ESLint 插件通过 DFS 访问和修改节点。</span></span><br><span class="line">traverse(ast, &#123;</span><br><span class="line">  Identifier(path)&#123;</span><br><span class="line">    <span class="comment">// Dfs 访问节点</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 4. 寻找节点路径 / 查找特定节点（如查找面包屑导航）</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">findPath</span>(<span class="params">tree, target</span>)</span>&#123;</span><br><span class="line">  path.push(node);</span><br><span class="line">  <span class="keyword">if</span>(node.id === target) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">  <span class="keyword">for</span>(child <span class="keyword">of</span> node.children)&#123;</span><br><span class="line">    <span class="keyword">if</span>(findPaht(child, target)) <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">  path.pop();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 5. 深克隆 JSON / 比较深层对象</span></span><br><span class="line"><span class="comment">// 例如 lodash 的 cloneDeep。</span></span><br></pre></td></tr></table></figure>
<h3 id="👉-二叉树前中后序"><a href="#👉-二叉树前中后序" class="headerlink" title="👉 二叉树前中后序"></a>👉 二叉树前中后序</h3><p>是 在 DFS 基础上 针对二叉树的 根、左、右 三者顺序组合出来的。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 都是伪代码</span></span><br><span class="line"><span class="comment">// 前序：根排最前，根左右</span></span><br><span class="line"><span class="comment">// 拷贝树、序列化</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">preorder</span>(<span class="params">node</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(!root) <span class="keyword">return</span>;</span><br><span class="line">  <span class="built_in">console</span>.log(root.val)</span><br><span class="line">  preorder(root.left)</span><br><span class="line">  preorder(root.right)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 中序：根在中间，左根右</span></span><br><span class="line"><span class="comment">// 在BST（二叉搜索树）中，中序遍历能得到有序数组。（面试高频）</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">inorder</span>(<span class="params">node</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(!root) <span class="keyword">return</span></span><br><span class="line">  preorder(root.left)</span><br><span class="line">  <span class="built_in">console</span>.log(root.val)</span><br><span class="line">  preorder(root.right)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 后序：根排最后，左右根</span></span><br><span class="line"><span class="comment">// 删除树、计算子节点值</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">postorder</span>(<span class="params">node</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">if</span>(!root) <span class="keyword">return</span>;</span><br><span class="line">  preorder(root.left)</span><br><span class="line">  preorder(root.right)</span><br><span class="line">  <span class="built_in">console</span>.log(root.valu)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="BFS应用"><a href="#BFS应用" class="headerlink" title="BFS应用"></a>BFS应用</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 伪代码</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bfs</span>(<span class="params">start</span>)</span>&#123;</span><br><span class="line">  <span class="keyword">const</span> queue = [start]</span><br><span class="line">  <span class="keyword">while</span>(queue.length &gt; <span class="number">0</span>)&#123;</span><br><span class="line">    <span class="keyword">const</span> node = queue.shift();</span><br><span class="line">    visit(node)</span><br><span class="line">    <span class="keyword">for</span>(<span class="keyword">const</span> child <span class="keyword">of</span> node.children)&#123;</span><br><span class="line">      queue.push(child)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>React Fiber 架构（核心点）</li>
</ol>
<p>React Fiber 不再使用 DFS 递归，而是使用 可中断的 BFS 式遍历。<br>逐层遍历每个节点<br>并允许中断（时间切片）<br>做成可恢复的链表结构</p>
<p>面试说法：<br>Fiber 是一个基于链表的可中断的 BFS 遍历，解决了递归 DFS 不能中断导致的卡顿问题。</p>
<ol start="3">
<li>渲染树（DOM Tree）层级布局计算</li>
</ol>
<p>浏览器 Layout（布局）阶段是 自上而下 BFS 派发。</p>
<ol start="4">
<li>聊天 / 评论 / 社交 App 的层级展开</li>
</ol>
<p>例如查看评论时，要按“楼层”展示。</p>
<ol start="5">
<li>微前端路由调度、依赖图分析（拓扑排序）</li>
</ol>
<p>BFS 用于：<br>构建依赖图<br>层序加载微应用<br>构建拓扑排序</p>
<h3 id="面试官：DFS和BFS的区别？在前端有哪些场景应用？"><a href="#面试官：DFS和BFS的区别？在前端有哪些场景应用？" class="headerlink" title="面试官：DFS和BFS的区别？在前端有哪些场景应用？"></a>面试官：DFS和BFS的区别？在前端有哪些场景应用？</h3><p>你可以这么回答（非常强的那种👇）：<br>DFS 是深度优先，一条路走到底；BFS 是广度优先，按层遍历。<br>两者的区别在于遍历策略、数据结构（DFS 用栈，BFS 用队列）、内存占用和是否适合求最短路径。<br>在前端工程中 DFS 常用于：<br>虚拟DOM深度遍历（Vdom Diff）<br>路由树、菜单树、权限树的处理<br>AST的遍历（Babel、ESLint、Webpack Loader）<br>查找节点路径、深克隆<br>BFS 常用于：<br>React Fiber的遍历机制<br>按层级渲染数据（评论、留言、树组件）<br>依赖图、拓扑排序<br>查找最近的节点（最近可见元素）</p>
<h2 id="十大排序算法"><a href="#十大排序算法" class="headerlink" title="十大排序算法"></a>十大排序算法</h2><p>我记不住怎么办，每次从冒泡开始，就像是学习英语，每次只背了个abandon。</p>

  </div>
</article>

    <div class="blog-post-comments">
        <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the comments.</noscript>
        </div>
    </div>



        
          <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/tags/">tags</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BD%A0%E5%9C%A8%E9%95%BF%E5%88%97%E8%A1%A8%E4%BC%98%E5%8C%96%E4%B8%AD%E5%81%9A%E4%BA%86%E5%93%AA%E4%BA%9B%E5%85%B7%E4%BD%93%E7%9A%84%E4%BA%8B%E6%83%85%EF%BC%9F"><span class="toc-number">1.</span> <span class="toc-text">你在长列表优化中做了哪些具体的事情？</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E8%99%9A%E6%8B%9F%E6%BB%9A%E5%8A%A8"><span class="toc-number">1.1.</span> <span class="toc-text">1. 虚拟滚动</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E5%88%86%E9%A1%B5%E5%92%8C%E6%97%A0%E9%99%90%E6%BB%9A%E5%8A%A8"><span class="toc-number">1.2.</span> <span class="toc-text">2. 分页和无限滚动</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E9%A1%B5"><span class="toc-number">1.2.1.</span> <span class="toc-text">分页</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%97%A0%E9%99%90%E6%BB%9A%E5%8A%A8"><span class="toc-number">1.2.2.</span> <span class="toc-text">无限滚动</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%BE%AE%E8%A7%82%E4%BC%98%E5%8C%96%EF%BC%9A%E5%BF%85%E9%A1%BB%E6%B8%B2%E6%9F%93%E9%95%BF%E5%88%97%E8%A1%A8%E6%97%B6"><span class="toc-number">1.3.</span> <span class="toc-text">3. 微观优化：必须渲染长列表时</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%85%B6%E4%BB%96%E8%BE%85%E5%8A%A9%E4%BC%98%E5%8C%96"><span class="toc-number">1.4.</span> <span class="toc-text">4. 其他辅助优化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E6%89%81%E5%B9%B3%E5%8C%96%E3%80%81%E5%8E%BB%E9%87%8D%E3%80%81%E6%8E%92%E5%BA%8F"><span class="toc-number">2.</span> <span class="toc-text">数组扁平化、去重、排序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#LeetCode%EF%BC%9ALRU-%E7%BC%93%E5%AD%98%E6%9C%BA%E5%88%B6"><span class="toc-number">3.</span> <span class="toc-text">LeetCode：LRU 缓存机制</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E6%89%81%E5%B9%B3%E5%8C%96%E4%B8%8E%E5%8E%BB%E9%87%8D"><span class="toc-number">4.</span> <span class="toc-text">数组扁平化与去重</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E6%89%81%E5%B9%B3%E5%8C%96%EF%BC%88%E6%95%B0%E7%BB%84%E9%99%8D%E7%BB%B4%EF%BC%89"><span class="toc-number">5.</span> <span class="toc-text">数组扁平化（数组降维）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Array-prototype-flat-%E6%96%B9%E6%B3%95"><span class="toc-number">5.1.</span> <span class="toc-text">Array.prototype.flat() 方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Array-prototype-flat-%E7%89%B9%E6%80%A7%E6%80%BB%E7%BB%93"><span class="toc-number">5.2.</span> <span class="toc-text">Array.prototype.flat() 特性总结</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%89%8B%E5%8A%A8%E5%AE%9E%E7%8E%B0%E6%89%81%E5%B9%B3%E5%8C%96%E6%96%B9%E6%B3%95"><span class="toc-number">6.</span> <span class="toc-text">手动实现扁平化方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E4%B8%80%EF%BC%9A%E4%BD%BF%E7%94%A8-reduce-%E6%96%B9%E6%B3%95"><span class="toc-number">6.1.</span> <span class="toc-text">方法一：使用 reduce 方法</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E6%AC%A1%E6%80%A7%E6%89%81%E5%B9%B3%E5%8C%96%E6%89%80%E6%9C%89"><span class="toc-number">6.1.1.</span> <span class="toc-text">一次性扁平化所有</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0-flat-%E5%87%BD%E6%95%B0"><span class="toc-number">6.1.2.</span> <span class="toc-text">实现 flat 函数</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E4%BA%8C%EF%BC%9A%E4%BD%BF%E7%94%A8%E6%A0%88"><span class="toc-number">6.2.</span> <span class="toc-text">方法二：使用栈</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80%E6%AC%A1%E6%80%A7%E9%99%8D%E7%BB%B4%E6%89%80%E6%9C%89"><span class="toc-number">6.2.1.</span> <span class="toc-text">一次性降维所有</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E5%8E%BB%E9%87%8D"><span class="toc-number">7.</span> <span class="toc-text">数组去重</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F%E4%B8%80%EF%BC%9ASet%EF%BC%88ES6%EF%BC%89"><span class="toc-number">7.1.</span> <span class="toc-text">方式一：Set（ES6）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E5%BC%8F%E4%BA%8C%EF%BC%9Areduce"><span class="toc-number">7.2.</span> <span class="toc-text">方式二：reduce</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E4%B8%89%EF%BC%9Afilter"><span class="toc-number">7.3.</span> <span class="toc-text">方法三：filter</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E5%8E%9F%E5%9C%B0%E5%8E%BB%E9%87%8D%E6%96%B9%E6%B3%95"><span class="toc-number">8.</span> <span class="toc-text">数组原地去重方法</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E4%B8%80%EF%BC%9A%E6%8E%92%E5%BA%8F%E5%8E%BB%E9%87%8D"><span class="toc-number">9.</span> <span class="toc-text">方法一：排序去重</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%B9%E6%B3%95%E4%BA%8C%EF%BC%9A%E4%BC%98%E5%8C%96%E7%89%88%E6%9C%AC"><span class="toc-number">10.</span> <span class="toc-text">方法二：优化版本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%A4%E7%A7%8D%E6%96%B9%E6%B3%95%E7%9A%84%E6%AF%94%E8%BE%83"><span class="toc-number">11.</span> <span class="toc-text">两种方法的比较</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E7%BB%84%E5%8E%BB%E9%87%8D%E5%87%BD%E6%95%B0%EF%BC%88%E6%94%AF%E6%8C%81%E5%AF%B9%E8%B1%A1%E5%92%8C%E6%95%B0%E7%BB%84%E5%85%83%E7%B4%A0%EF%BC%89"><span class="toc-number">12.</span> <span class="toc-text">数组去重函数（支持对象和数组元素）</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9C%80%E6%B1%82%E8%AF%B4%E6%98%8E"><span class="toc-number">12.1.</span> <span class="toc-text">需求说明</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E8%A7%A3%E6%B3%95%EF%BC%9A%E4%BD%BF%E7%94%A8-JSON-stringify"><span class="toc-number">13.</span> <span class="toc-text">基础解法：使用 JSON.stringify</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E5%88%86%E6%9E%90"><span class="toc-number">14.</span> <span class="toc-text">问题分析</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E6%96%B9%E6%A1%88"><span class="toc-number">15.</span> <span class="toc-text">解决方案</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E5%86%B3%E6%80%9D%E8%B7%AF"><span class="toc-number">15.1.</span> <span class="toc-text">解决思路</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-number">15.2.</span> <span class="toc-text">代码实现</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%80%BB%E7%BB%93"><span class="toc-number">16.</span> <span class="toc-text">总结</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">16.1.</span> <span class="toc-text"></span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%8B%E5%86%99aysnc%E5%92%8Cawait"><span class="toc-number">16.2.</span> <span class="toc-text">手写aysnc和await</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%90%88%E5%B9%B6%E4%B8%A4%E4%B8%AA%E6%9C%89%E5%BA%8F%E6%95%B0%E7%BB%84"><span class="toc-number">16.3.</span> <span class="toc-text">合并两个有序数组</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#js%E5%88%A4%E6%96%AD%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B"><span class="toc-number">17.</span> <span class="toc-text">js判断数据类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#map%E5%AE%9E%E7%8E%B0reduce"><span class="toc-number">18.</span> <span class="toc-text">map实现reduce</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Jsx%E5%92%8CReact-createElement"><span class="toc-number">19.</span> <span class="toc-text">Jsx和React.createElement()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AST%E8%BD%AC%E6%8D%A2"><span class="toc-number">20.</span> <span class="toc-text">AST转换</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A2%84%E5%8A%A0%E8%BD%BD"><span class="toc-number">21.</span> <span class="toc-text">预加载</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B5%85%E6%8B%B7%E8%B4%9D%E5%92%8C%E6%B7%B1%E6%8B%B7%E8%B4%9D"><span class="toc-number">21.1.</span> <span class="toc-text">浅拷贝和深拷贝</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSON%E6%96%B9%E6%B3%95%E6%B7%B1%E6%8B%B7%E8%B4%9D%E7%9A%84%E5%B1%80%E9%99%90%E6%80%A7"><span class="toc-number">21.2.</span> <span class="toc-text">JSON方法深拷贝的局限性</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#DFS%EF%BC%8C%E4%BA%8C%E5%8F%89%E6%A0%91%EF%BC%8C%E5%89%8D%E4%B8%AD%E5%90%8E%E5%BA%8F%EF%BC%8C%E4%BB%A5%E5%8F%8A%E6%8F%92%E5%85%A5%E9%83%A8%E5%88%86BFS%E7%9A%84%E7%90%86%E8%AE%BA%E7%9F%A5%E8%AF%86"><span class="toc-number">22.</span> <span class="toc-text">DFS，二叉树，前中后序，以及插入部分BFS的理论知识</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%91%89-DFS-%E5%85%88%E5%BA%8F-%E5%90%8E%E5%BA%8F"><span class="toc-number">22.1.</span> <span class="toc-text">👉 DFS 先序 &#x2F; 后序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%91%89-%E4%BA%8C%E5%8F%89%E6%A0%91%E5%89%8D%E4%B8%AD%E5%90%8E%E5%BA%8F"><span class="toc-number">22.2.</span> <span class="toc-text">👉 二叉树前中后序</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#BFS%E5%BA%94%E7%94%A8"><span class="toc-number">22.3.</span> <span class="toc-text">BFS应用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9D%A2%E8%AF%95%E5%AE%98%EF%BC%9ADFS%E5%92%8CBFS%E7%9A%84%E5%8C%BA%E5%88%AB%EF%BC%9F%E5%9C%A8%E5%89%8D%E7%AB%AF%E6%9C%89%E5%93%AA%E4%BA%9B%E5%9C%BA%E6%99%AF%E5%BA%94%E7%94%A8%EF%BC%9F"><span class="toc-number">22.4.</span> <span class="toc-text">面试官：DFS和BFS的区别？在前端有哪些场景应用？</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8D%81%E5%A4%A7%E6%8E%92%E5%BA%8F%E7%AE%97%E6%B3%95"><span class="toc-number">23.</span> <span class="toc-text">十大排序算法</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.facebook.com/sharer.php?u=http://yoursite.com/2025/11/18/2025-practice/"><i class="fab fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://twitter.com/share?url=http://yoursite.com/2025/11/18/2025-practice/&text=2025年｜前端面试练习题"><i class="fab fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.linkedin.com/shareArticle?url=http://yoursite.com/2025/11/18/2025-practice/&title=2025年｜前端面试练习题"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://pinterest.com/pin/create/bookmarklet/?url=http://yoursite.com/2025/11/18/2025-practice/&is_video=false&description=2025年｜前端面试练习题"><i class="fab fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=2025年｜前端面试练习题&body=Check out this article: http://yoursite.com/2025/11/18/2025-practice/"><i class="fas fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://getpocket.com/save?url=http://yoursite.com/2025/11/18/2025-practice/&title=2025年｜前端面试练习题"><i class="fab fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://reddit.com/submit?url=http://yoursite.com/2025/11/18/2025-practice/&title=2025年｜前端面试练习题"><i class="fab fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.stumbleupon.com/submit?url=http://yoursite.com/2025/11/18/2025-practice/&title=2025年｜前端面试练习题"><i class="fab fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://digg.com/submit?url=http://yoursite.com/2025/11/18/2025-practice/&title=2025年｜前端面试练习题"><i class="fab fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="http://www.tumblr.com/share/link?url=http://yoursite.com/2025/11/18/2025-practice/&name=2025年｜前端面试练习题&description="><i class="fab fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" target="_blank" rel="noopener" href="https://news.ycombinator.com/submitlink?u=http://yoursite.com/2025/11/18/2025-practice/&t=2025年｜前端面试练习题"><i class="fab fa-hacker-news fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
        <a id="menu" class="icon" href="#" onclick="$('#nav-footer').toggle();return false;"><i class="fas fa-bars fa-lg" aria-hidden="true"></i> Menu</a>
        <a id="toc" class="icon" href="#" onclick="$('#toc-footer').toggle();return false;"><i class="fas fa-list fa-lg" aria-hidden="true"></i> TOC</a>
        <a id="share" class="icon" href="#" onclick="$('#share-footer').toggle();return false;"><i class="fas fa-share-alt fa-lg" aria-hidden="true"></i> Share</a>
        <a id="top" style="display:none" class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fas fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a>
    </div>

  </div>
</div>

        
        <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2026 Arieslx
  </div>
  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/about/">About</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="/tags/">tags</a></li>
        
      </ul>
    </nav>
  </div>
</footer>

    </div>
    <!-- styles -->

<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">


<link rel="stylesheet" href="/lib/justified-gallery/css/justifiedGallery.min.css">


    <!-- jquery -->

<script src="/lib/jquery/jquery.min.js"></script>


<script src="/lib/justified-gallery/js/jquery.justifiedGallery.min.js"></script>

<!-- clipboard -->

  
<script src="/lib/clipboard/clipboard.min.js"></script>

  <script type="text/javascript">
  $(function() {
    // copy-btn HTML
    var btn = "<span class=\"btn-copy tooltipped tooltipped-sw\" aria-label=\"Copy to clipboard!\">";
    btn += '<i class="far fa-clone"></i>';
    btn += '</span>'; 
    // mount it!
    $(".highlight .code pre").before(btn);
    var clip = new ClipboardJS('.btn-copy', {
      target: function(trigger) {
        return trigger.nextElementSibling;
      }
    });
    clip.on('success', function(e) {
      e.trigger.setAttribute('aria-label', "Copied!");
      e.clearSelection();
    })
  })
  </script>


<script src="/js/main.js"></script>

<!-- search -->

<!-- Google Analytics -->

<!-- Baidu Analytics -->

<!-- Disqus Comments -->

    <script type="text/javascript">
        var disqus_shortname = 'cactus-1';

        (function(){
            var dsq = document.createElement('script');
            dsq.type = 'text/javascript';
            dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        }());
    </script>


</body>
</html>
