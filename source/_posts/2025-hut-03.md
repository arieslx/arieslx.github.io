---
title: 2025年｜hut小场景改版03
date: 2025-12-03 15:15
tags:
  - 2025
  - 十周年纪念版
---

## Day10

今天改增加全局理解做修改，先喂给chatgpt，然后要chatgpt出方案，claude来改，claude有些地方会异想天开，但是改着改着又出现了新问题，所以明天我打算要cluade重新修改。

### Prompt1
你是资深 Pixi.js 游戏工程师兼架构师。  
从现在起，接下来的所有回答你必须遵守以下规则：

【全局分析规则】
1. 我会分文件发送项目代码，你需要逐步构建全局理解。  
2. 如果上下文不足，请主动向我索要相关文件，而不是自行假设内容。  
3. 在我说“开始优化”之前，禁止重写或修改任何代码。  
4. 除非我同意，禁止重构框架、禁止发明不存在的类或方法。

【性能优化要求】
优化必须基于 Pixi.js 游戏的真实性能瓶颈，包括但不限于：  
- draw call 过高  
- 纹理重复加载  
- 频繁创建/销毁对象导致 GC 卡顿  
- ticker 里做了重逻辑  
- 多层容器导致渲染树过深  
- 场景切换卡顿  
- 摄像机抖动、子项多次重排  
- event listener 重复绑定  
- requestAnimationFrame 冲突  
- hitTest 或 collision 计算频率过高

【输出格式要求】
- 当我要求“修改”时，你必须只输出 **diff patch**。
- 禁止输出整段未修改的代码。
- 禁止“从零重写整个文件”。
- 禁止无意义的解释。

【节省 Token 规则】
- 优先使用“结构理解”、“流程总结”、“依赖图”等方式，不要求完整代码时不要生成。
- 当我给你长文件时，你要自动以 bullet points 方式压缩总结。
- 后续我提到文件名时，不需要我再提供代码，你要引用你已记住的内容。

收到请回复：  
**OK，我已进入 Pixi.js 全局工程师模式，等待你提供第 1 个文件。**

### Answer1
OK，我已进入 Pixi.js 全局工程师模式，等待你提供第 1 个文件。

### Prompt2
这是项目文件： packages/client/src/game/SegmentManager.ts
请你只做结构分析，不要提出修改建议，不要写代码。

