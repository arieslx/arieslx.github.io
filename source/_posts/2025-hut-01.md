---
title: 2025年｜hut小场景改版
date: 2025-11-27 07:15
tags:
  - 2024
  - 十周年纪念版。
---

[hut毕业设计](https://gitee.com/zengxiaoluan/the_grand_design)

最近在重构这个项目，之前的代码库里的代码太臃肿了，可读性也比较差，也没有什么可玩性。上学的时候老田要我做第二版我一直拖着没做，最近有时间才开始做。

## Day1
[重构成nodejs+react](https://gitee.com/git.arieslx.net/the_grand_design/pulls/1)
refactor: 重构老项目
- 后端php架构修改成nodejs采用express框架-> 没有实现功能，目前只是api输出结果，且不报错。
- 前端修改成react框架，目前less转css那块还需要大改，另外App.js里的html代码太多了，需要抽离成组件。
- 浏览器上点击事件被我删掉了，目前最小范围修改
- 隐藏parallax.js插件，有点消耗新能，便于调试
- 注释掉浏览器事件鼠标和拖拽事件，目前有bug
- 这个版本的代码还有很多问题，只是大概能跑而已

## Day2
[删减代码+抽子组件](https://gitee.com/git.arieslx.net/the_grand_design/pulls/2)
[删减代码](https://gitee.com/git.arieslx.net/the_grand_design/pulls/3)

- 重构的时候手动改了一遍ul和li的布局，ai在读写的时候生成了极具迷惑性的错误静态资源。
- 抽子组件的时候又改了一遍ul和li的布局，我写了一个子组件，让ling参考我的代码和注释抽子组件，它倒是大致完成了，就是又要让我重新检查一遍并并改写。

这样就花了两天！

## Day3
搭建pixi.js框架，我跟chatgpt互动了几波，让它帮我生成了一个可跨平台，可做离线和pwa，前端用react，node层用express的脚手架的文件结构。

```
pixi-hiking/
├─ pnpm-workspace.yaml
├─ package.json
├─ README.md
├─ packages/
│   ├─ client/                     # React + Pixi 前端
│   │   ├─ package.json
│   │   ├─ vite.config.ts
│   │   ├─ public/                 
│   │   │   ├─ assets/             # PNG/GIF/占位图
│   │   │   └─ sw.js               # Service Worker
│   │   └─ src/
│   │       ├─ app/
│   │       │   └─ Main.ts
│   │       ├─ game/
│   │       ├─ engine/
│   │       ├─ ui/
│   │       └─ main.tsx
│   ├─ shared/                     
│   └─ server/                     
└─ platforms/
    ├─ web/                        # Web(PWA) 特殊入口
    │   ├─ index.html
    │   └─ manifest.json
    ├─ chrome-extension/           
    └─ mobile/                     
```

接着我用copilot生成了代码，但是copilot生成的代码有bug，所以只能自己手动改了，还好错误提示很准确。
- 修改vite的静态文件引用路径。
- 修复typescript的依赖包。
- 接着可以运行了，页面又出现404，然后又改了一些html文件的放置地址。
- 运行成功后开始用lingma继续写代码。
- 网页终于可以运行了，场景放上去了，我想想该怎么做。
- 布局全乱了真是头疼，不会要改第三遍吧，准备先睡了，又到零点。

## Day4

丢失了一些psd文件，到时候就有点麻烦！脚手架搭好了，场景可以动了，gif取了三帧用三张png代替
[GIF转PNG](https://www.cleverpdf.com/cn/gif-to-png),明天解决一下定位问题，我实在是不想改第三次了，这不是技术活这是体力活。



